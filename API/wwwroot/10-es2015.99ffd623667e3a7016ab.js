(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{jkDv:function(t,e,c){"use strict";c.r(e),c.d(e,"AdminModule",(function(){return x}));var n=c("ofXK"),r=c("PCNd"),i=c("tyNb"),o=c("fXoL"),d=c("mwRl"),s=c("AytR"),b=c("tk/3");let a=(()=>{class t{constructor(t){this.http=t,this.baseUrl=s.a.apiUrl}createProduct(t){return this.http.post(this.baseUrl+"products",t)}updateProduct(t,e){return this.http.put(this.baseUrl+"products/"+e,t)}deleteProduct(t){return this.http.delete(this.baseUrl+"products/"+t)}}return t.\u0275fac=function(e){return new(e||t)(o.Yb(b.b))},t.\u0275prov=o.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var u=c("QwBp"),p=c("T3Z5");const l=function(t){return["edit",t]};function g(t,e){if(1&t){const t=o.Vb();o.Ub(0,"tr"),o.Ub(1,"td",18),o.Hc(2),o.Tb(),o.Ub(3,"td"),o.Ub(4,"div",12),o.Pb(5,"img",19),o.Tb(),o.Tb(),o.Ub(6,"th",18),o.Ub(7,"h5"),o.Hc(8),o.Tb(),o.Tb(),o.Ub(9,"td",18),o.Hc(10),o.hc(11,"currency"),o.Tb(),o.Ub(12,"td",18),o.Ub(13,"button",20),o.Hc(14,"Edit"),o.Tb(),o.Tb(),o.Ub(15,"td",18),o.Ub(16,"button",21),o.cc("click",(function(){o.yc(t);const c=e.$implicit;return o.gc(2).deleteProduct(c.id)})),o.Hc(17,"Delete"),o.Tb(),o.Tb(),o.Tb()}if(2&t){const t=e.$implicit;o.Bb(2),o.Ic(t.id),o.Bb(3),o.oc("src",t.pictureUrl||"/assets/images/placeholder.png",o.Ac),o.oc("alt",t.name),o.Bb(3),o.Ic(t.name),o.Bb(2),o.Ic(o.kc(11,6,t.price,"INR",!0)),o.Bb(3),o.nc("routerLink",o.rc(10,l,t.id))}}function h(t,e){if(1&t){const t=o.Vb();o.Ub(0,"div",22),o.Ub(1,"app-pager",23),o.cc("pageChanged",(function(e){return o.yc(t),o.gc(2).onPageChanged(e)})),o.Tb(),o.Tb()}if(2&t){const t=o.gc(2);o.Bb(1),o.nc("pageSize",t.shopParams.pageSize)("pageNumber",t.shopParams.pageNumber)("totalCount",t.totalCount)}}const m=function(){return["/admin/create"]};function f(t,e){if(1&t&&(o.Ub(0,"section",1),o.Ub(1,"div",2),o.Ub(2,"div",3),o.Ub(3,"div",4),o.Ub(4,"div",5),o.Ub(5,"header",6),o.Hc(6,"Product List"),o.Tb(),o.Ub(7,"button",7),o.Hc(8,"Create new product"),o.Tb(),o.Tb(),o.Pb(9,"app-paging-header",8),o.Ub(10,"div",9),o.Ub(11,"table",10),o.Ub(12,"thead"),o.Ub(13,"tr"),o.Ub(14,"th",11),o.Ub(15,"div",12),o.Hc(16,"Id"),o.Tb(),o.Tb(),o.Ub(17,"th",11),o.Ub(18,"div",13),o.Hc(19,"Product"),o.Tb(),o.Tb(),o.Ub(20,"th",11),o.Ub(21,"div",14),o.Hc(22,"Name"),o.Tb(),o.Tb(),o.Ub(23,"th",11),o.Ub(24,"div",15),o.Hc(25,"Price"),o.Tb(),o.Tb(),o.Ub(26,"th",11),o.Ub(27,"div",15),o.Hc(28,"Edit"),o.Tb(),o.Tb(),o.Ub(29,"th",11),o.Ub(30,"div",15),o.Hc(31,"Delete"),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Ub(32,"tbody"),o.Fc(33,g,18,12,"tr",16),o.Tb(),o.Tb(),o.Tb(),o.Fc(34,h,2,3,"div",17),o.Tb(),o.Tb(),o.Tb(),o.Tb()),2&t){const t=o.gc();o.Bb(7),o.nc("routerLink",o.qc(6,m)),o.Bb(2),o.nc("totalCount",t.totalCount)("pageSize",t.shopParams.pageSize)("pageNumber",t.shopParams.pageNumber),o.Bb(24),o.nc("ngForOf",t.products),o.Bb(1),o.nc("ngIf",t.totalCount>0)}}let v=(()=>{class t{constructor(t,e){this.shopService=t,this.adminService=e,this.shopParams=this.shopService.getShopParams()}ngOnInit(){this.getProducts()}getProducts(t=!1){this.shopService.getProducts(t).subscribe(t=>{this.products=t.data,this.totalCount=t.count},t=>{console.log(t)})}onPageChanged(t){const e=this.shopService.getShopParams();e.pageNumber!==t&&(e.pageNumber=t,this.shopService.setShopParams(e),this.getProducts(!0))}deleteProduct(t){this.adminService.deleteProduct(t).subscribe(e=>{this.products.splice(this.products.findIndex(e=>e.id===t),1),this.totalCount--})}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(d.a),o.Ob(a))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-admin"]],decls:1,vars:1,consts:[["class","admin-page",4,"ngIf"],[1,"admin-page"],[1,"container"],[1,"row"],[1,"col-lg-12"],[1,"d-flex","justify-content-between","my-3"],[1,"h2"],[1,"btn","btn-outline-success",3,"routerLink"],[3,"totalCount","pageSize","pageNumber"],[1,"table-responsive","mat-elevation-z8"],[1,"table"],["scope","col"],[1,"p-2"],[1,"p-2","text-uppercase"],[1,"py-2","text-uppercase"],[1,"p-2","px-3","text-uppercase"],[4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],[1,"align-middle"],[1,"img-fluid",2,"max-height","50px",3,"src","alt"],[1,"btn","btn-warning",3,"routerLink"],[1,"btn","btn-danger",3,"click"],[1,"d-flex","justify-content-center"],[3,"pageSize","pageNumber","totalCount","pageChanged"]],template:function(t,e){1&t&&o.Fc(0,f,35,7,"section",0),2&t&&o.nc("ngIf",e.products)},directives:[n.n,i.d,u.a,n.m,p.a],pipes:[n.d],styles:[""]}),t})();class T{constructor(t){this.name="",this.description="",this.price=0,this.pictureUrl="",Object.assign(this,t)}}var U=c("cp0P"),y=c("3Pt+");function P(t,e){1&t&&(o.Ub(0,"div"),o.Hc(1," Product Name is required "),o.Tb())}function B(t,e){if(1&t&&(o.Ub(0,"div",25),o.Fc(1,P,2,0,"div",26),o.Tb()),2&t){o.gc();const t=o.wc(11);o.Bb(1),o.nc("ngIf",t.errors.required)}}function I(t,e){1&t&&(o.Ub(0,"div"),o.Hc(1," Product price is required "),o.Tb())}function C(t,e){1&t&&(o.Ub(0,"div"),o.Hc(1," Product price needs to be decimal value "),o.Tb())}function w(t,e){1&t&&(o.Ub(0,"div"),o.Hc(1," Product price must be greater than zero "),o.Tb())}function M(t,e){if(1&t&&(o.Ub(0,"div",25),o.Fc(1,I,2,0,"div",26),o.Fc(2,C,2,0,"div",26),o.Fc(3,w,2,0,"div",26),o.Tb()),2&t){o.gc();const t=o.wc(17);o.Bb(1),o.nc("ngIf",t.errors.required),o.Bb(1),o.nc("ngIf",t.errors.pattern),o.Bb(1),o.nc("ngIf",t.errors.min)}}function S(t,e){1&t&&(o.Ub(0,"div"),o.Hc(1," Product price is required "),o.Tb())}function H(t,e){if(1&t&&(o.Ub(0,"div",25),o.Fc(1,S,2,0,"div",26),o.Tb()),2&t){o.gc();const t=o.wc(25);o.Bb(1),o.nc("ngIf",t.errors.required)}}function F(t,e){if(1&t&&(o.Ub(0,"option",27),o.Hc(1),o.Tb()),2&t){const t=e.$implicit,c=o.gc();o.nc("selected",c.product.productBrandId===t.id)("ngValue",t.id),o.Bb(1),o.Ic(t.name)}}function O(t,e){if(1&t&&(o.Ub(0,"option",27),o.Hc(1),o.Tb()),2&t){const t=e.$implicit,c=o.gc();o.nc("selected",c.product.productTypeId===t.id)("ngValue",t.id),o.Bb(1),o.Ic(t.name)}}const j=function(t){return{"is-invalid":t}};let k=(()=>{class t{constructor(t,e,c,n){this.adminService=t,this.shopService=e,this.route=c,this.router=n,this.product=new T}ngOnInit(){const t=this.getBrands(),e=this.getTypes();Object(U.a)([e,t]).subscribe(t=>{this.types=t[0],this.brands=t[1]},t=>{console.log(t)},()=>{"edit"===this.route.snapshot.url[0].path&&this.loadProduct()})}updatePrice(t){this.product.price=t}loadProduct(){this.shopService.getProduct(+this.route.snapshot.paramMap.get("id")).subscribe(t=>{const e=this.brands&&this.brands.find(e=>e.name===t.productBrand).id,c=this.types&&this.types.find(e=>e.name===t.productType).id;this.product=Object.assign(Object.assign({},t),{productBrandId:e,productTypeId:c})})}getBrands(){return this.shopService.getBrands()}getTypes(){return this.shopService.getTypes()}onSubmit(t){if("edit"===this.route.snapshot.url[0].path){const e=Object.assign(Object.assign(Object.assign({},this.product),t),{price:+t.price});this.adminService.updateProduct(e,+this.route.snapshot.paramMap.get("id")).subscribe(t=>{this.router.navigate(["/admin"])})}else{const e=Object.assign(Object.assign({},t),{price:+t.price});this.adminService.createProduct(e).subscribe(t=>{this.router.navigate(["/admin"])})}}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(a),o.Ob(d.a),o.Ob(i.a),o.Ob(i.c))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-edit-product"]],decls:40,vars:23,consts:[[1,"product-edit","mt-5"],[1,"container"],[1,"row"],[1,"col-lg-8"],[3,"ngSubmit"],["productForm","ngForm"],[1,"form-row"],[1,"form-group","col-md-6"],["for","name"],["required","","type","text","id","name","placeholder","Product Name","name","name",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["name","ngModel"],["class","invalid-feedback",4,"ngIf"],["for","price"],["required","","type","text","id","price","placeholder","Price","name","price","pattern","^\\$?([0-9]{1,3},([0-9]{3},)*[0-9]{3}|[0-9]+)(\\.[0-9][0-9])?$","min","0.01",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["price","ngModel"],[1,"form-group","col-md-12"],["for","description"],["required","","id","description","name","description","rows","3",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["description","ngModel"],["for","brand"],["id","brand","name","productBrandId","required","",1,"form-control",3,"ngModel","ngModelChange"],[3,"selected","ngValue",4,"ngFor","ngForOf"],["for","type"],["id","type","name","productTypeId","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary","my-3","float-right",3,"disabled"],[1,"invalid-feedback"],[4,"ngIf"],[3,"selected","ngValue"]],template:function(t,e){if(1&t){const t=o.Vb();o.Ub(0,"section",0),o.Ub(1,"div",1),o.Ub(2,"div",2),o.Ub(3,"div",3),o.Ub(4,"form",4,5),o.cc("ngSubmit",(function(){o.yc(t);const c=o.wc(5);return e.onSubmit(c.valid&&c.value)})),o.Ub(6,"div",6),o.Ub(7,"div",7),o.Ub(8,"label",8),o.Hc(9,"Product Name"),o.Tb(),o.Ub(10,"input",9,10),o.cc("ngModelChange",(function(t){return e.product.name=t})),o.Tb(),o.Fc(12,B,2,1,"div",11),o.Tb(),o.Ub(13,"div",7),o.Ub(14,"label",12),o.Hc(15,"Price"),o.Tb(),o.Ub(16,"input",13,14),o.cc("ngModelChange",(function(t){return e.updatePrice(t-0)})),o.hc(18,"number"),o.Tb(),o.Fc(19,M,4,3,"div",11),o.Tb(),o.Tb(),o.Ub(20,"div",6),o.Ub(21,"div",15),o.Ub(22,"label",16),o.Hc(23,"Description"),o.Tb(),o.Ub(24,"textarea",17,18),o.cc("ngModelChange",(function(t){return e.product.description=t})),o.Tb(),o.Fc(26,H,2,1,"div",11),o.Tb(),o.Tb(),o.Ub(27,"div",6),o.Ub(28,"div",7),o.Ub(29,"label",19),o.Hc(30,"Brand"),o.Tb(),o.Ub(31,"select",20),o.cc("ngModelChange",(function(t){return e.product.productBrandId=t})),o.Fc(32,F,2,3,"option",21),o.Tb(),o.Tb(),o.Ub(33,"div",7),o.Ub(34,"label",22),o.Hc(35,"Type"),o.Tb(),o.Ub(36,"select",23),o.cc("ngModelChange",(function(t){return e.product.productTypeId=t})),o.Fc(37,O,2,3,"option",21),o.Tb(),o.Tb(),o.Tb(),o.Ub(38,"button",24),o.Hc(39,"Submit"),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb()}if(2&t){const t=o.wc(5),c=o.wc(11),n=o.wc(17),r=o.wc(25);o.Bb(10),o.nc("ngClass",o.rc(17,j,c.invalid&&(c.dirty||c.touched)))("ngModel",e.product.name),o.Bb(2),o.nc("ngIf",c.invalid&&(c.dirty||c.touched)),o.Bb(4),o.nc("ngClass",o.rc(19,j,n.invalid&&(n.dirty||n.touched)))("ngModel",o.jc(18,14,e.product.price-0,"1.2-2")),o.Bb(3),o.nc("ngIf",n.invalid&&(n.dirty||n.touched)),o.Bb(5),o.nc("ngClass",o.rc(21,j,r.invalid&&(r.dirty||r.touched)))("ngModel",e.product.description),o.Bb(2),o.nc("ngIf",r.invalid&&(r.dirty||r.touched)),o.Bb(5),o.nc("ngModel",e.product.productBrandId),o.Bb(1),o.nc("ngForOf",e.brands),o.Bb(4),o.nc("ngModel",e.product.productTypeId),o.Bb(1),o.nc("ngForOf",e.types),o.Bb(1),o.nc("disabled",!t.valid)}},directives:[y.t,y.j,y.k,y.a,y.p,n.l,y.i,y.l,n.n,y.n,y.q,n.m,y.m,y.s],pipes:[n.g],styles:[""]}),t})();const N=[{path:"",component:v},{path:"create",component:k,data:{breadcrumb:"Create"}},{path:"edit/:id",component:k,data:{breadcrumb:"Edit"}}];let q=(()=>{class t{}return t.\u0275mod=o.Mb({type:t}),t.\u0275inj=o.Lb({factory:function(e){return new(e||t)},imports:[[i.g.forChild(N)],i.g]}),t})(),x=(()=>{class t{}return t.\u0275mod=o.Mb({type:t}),t.\u0275inj=o.Lb({factory:function(e){return new(e||t)},imports:[[n.c,r.a,q]]}),t})()}}]);