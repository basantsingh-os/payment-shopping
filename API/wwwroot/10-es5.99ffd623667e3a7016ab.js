function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var c=t[n];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{jkDv:function(e,t,n){"use strict";n.r(t),n.d(t,"AdminModule",(function(){return $}));var c,r=n("ofXK"),i=n("PCNd"),o=n("tyNb"),a=n("fXoL"),d=n("mwRl"),u=n("AytR"),b=n("tk/3"),s=((c=function(){function e(t){_classCallCheck(this,e),this.http=t,this.baseUrl=u.a.apiUrl}return _createClass(e,[{key:"createProduct",value:function(e){return this.http.post(this.baseUrl+"products",e)}},{key:"updateProduct",value:function(e,t){return this.http.put(this.baseUrl+"products/"+t,e)}},{key:"deleteProduct",value:function(e){return this.http.delete(this.baseUrl+"products/"+e)}}]),e}()).\u0275fac=function(e){return new(e||c)(a.Yb(b.b))},c.\u0275prov=a.Kb({token:c,factory:c.\u0275fac,providedIn:"root"}),c),p=n("QwBp"),l=n("T3Z5"),g=function(e){return["edit",e]};function f(e,t){if(1&e){var n=a.Vb();a.Ub(0,"tr"),a.Ub(1,"td",18),a.Hc(2),a.Tb(),a.Ub(3,"td"),a.Ub(4,"div",12),a.Pb(5,"img",19),a.Tb(),a.Tb(),a.Ub(6,"th",18),a.Ub(7,"h5"),a.Hc(8),a.Tb(),a.Tb(),a.Ub(9,"td",18),a.Hc(10),a.hc(11,"currency"),a.Tb(),a.Ub(12,"td",18),a.Ub(13,"button",20),a.Hc(14,"Edit"),a.Tb(),a.Tb(),a.Ub(15,"td",18),a.Ub(16,"button",21),a.cc("click",(function(){a.yc(n);var e=t.$implicit;return a.gc(2).deleteProduct(e.id)})),a.Hc(17,"Delete"),a.Tb(),a.Tb(),a.Tb()}if(2&e){var c=t.$implicit;a.Bb(2),a.Ic(c.id),a.Bb(3),a.oc("src",c.pictureUrl||"/assets/images/placeholder.png",a.Ac),a.oc("alt",c.name),a.Bb(3),a.Ic(c.name),a.Bb(2),a.Ic(a.kc(11,6,c.price,"INR",!0)),a.Bb(3),a.nc("routerLink",a.rc(10,g,c.id))}}function h(e,t){if(1&e){var n=a.Vb();a.Ub(0,"div",22),a.Ub(1,"app-pager",23),a.cc("pageChanged",(function(e){return a.yc(n),a.gc(2).onPageChanged(e)})),a.Tb(),a.Tb()}if(2&e){var c=a.gc(2);a.Bb(1),a.nc("pageSize",c.shopParams.pageSize)("pageNumber",c.shopParams.pageNumber)("totalCount",c.totalCount)}}var v=function(){return["/admin/create"]};function m(e,t){if(1&e&&(a.Ub(0,"section",1),a.Ub(1,"div",2),a.Ub(2,"div",3),a.Ub(3,"div",4),a.Ub(4,"div",5),a.Ub(5,"header",6),a.Hc(6,"Product List"),a.Tb(),a.Ub(7,"button",7),a.Hc(8,"Create new product"),a.Tb(),a.Tb(),a.Pb(9,"app-paging-header",8),a.Ub(10,"div",9),a.Ub(11,"table",10),a.Ub(12,"thead"),a.Ub(13,"tr"),a.Ub(14,"th",11),a.Ub(15,"div",12),a.Hc(16,"Id"),a.Tb(),a.Tb(),a.Ub(17,"th",11),a.Ub(18,"div",13),a.Hc(19,"Product"),a.Tb(),a.Tb(),a.Ub(20,"th",11),a.Ub(21,"div",14),a.Hc(22,"Name"),a.Tb(),a.Tb(),a.Ub(23,"th",11),a.Ub(24,"div",15),a.Hc(25,"Price"),a.Tb(),a.Tb(),a.Ub(26,"th",11),a.Ub(27,"div",15),a.Hc(28,"Edit"),a.Tb(),a.Tb(),a.Ub(29,"th",11),a.Ub(30,"div",15),a.Hc(31,"Delete"),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(32,"tbody"),a.Fc(33,f,18,12,"tr",16),a.Tb(),a.Tb(),a.Tb(),a.Fc(34,h,2,3,"div",17),a.Tb(),a.Tb(),a.Tb(),a.Tb()),2&e){var n=a.gc();a.Bb(7),a.nc("routerLink",a.qc(6,v)),a.Bb(2),a.nc("totalCount",n.totalCount)("pageSize",n.shopParams.pageSize)("pageNumber",n.shopParams.pageNumber),a.Bb(24),a.nc("ngForOf",n.products),a.Bb(1),a.nc("ngIf",n.totalCount>0)}}var T,U=((T=function(){function e(t,n){_classCallCheck(this,e),this.shopService=t,this.adminService=n,this.shopParams=this.shopService.getShopParams()}return _createClass(e,[{key:"ngOnInit",value:function(){this.getProducts()}},{key:"getProducts",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.shopService.getProducts(t).subscribe((function(t){e.products=t.data,e.totalCount=t.count}),(function(e){console.log(e)}))}},{key:"onPageChanged",value:function(e){var t=this.shopService.getShopParams();t.pageNumber!==e&&(t.pageNumber=e,this.shopService.setShopParams(t),this.getProducts(!0))}},{key:"deleteProduct",value:function(e){var t=this;this.adminService.deleteProduct(e).subscribe((function(n){t.products.splice(t.products.findIndex((function(t){return t.id===e})),1),t.totalCount--}))}}]),e}()).\u0275fac=function(e){return new(e||T)(a.Ob(d.a),a.Ob(s))},T.\u0275cmp=a.Ib({type:T,selectors:[["app-admin"]],decls:1,vars:1,consts:[["class","admin-page",4,"ngIf"],[1,"admin-page"],[1,"container"],[1,"row"],[1,"col-lg-12"],[1,"d-flex","justify-content-between","my-3"],[1,"h2"],[1,"btn","btn-outline-success",3,"routerLink"],[3,"totalCount","pageSize","pageNumber"],[1,"table-responsive","mat-elevation-z8"],[1,"table"],["scope","col"],[1,"p-2"],[1,"p-2","text-uppercase"],[1,"py-2","text-uppercase"],[1,"p-2","px-3","text-uppercase"],[4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],[1,"align-middle"],[1,"img-fluid",2,"max-height","50px",3,"src","alt"],[1,"btn","btn-warning",3,"routerLink"],[1,"btn","btn-danger",3,"click"],[1,"d-flex","justify-content-center"],[3,"pageSize","pageNumber","totalCount","pageChanged"]],template:function(e,t){1&e&&a.Fc(0,m,35,7,"section",0),2&e&&a.nc("ngIf",t.products)},directives:[r.n,o.d,p.a,r.m,l.a],pipes:[r.d],styles:[""]}),T),y=function e(t){_classCallCheck(this,e),this.name="",this.description="",this.price=0,this.pictureUrl="",Object.assign(this,t)},C=n("cp0P"),P=n("3Pt+");function B(e,t){1&e&&(a.Ub(0,"div"),a.Hc(1," Product Name is required "),a.Tb())}function I(e,t){if(1&e&&(a.Ub(0,"div",25),a.Fc(1,B,2,0,"div",26),a.Tb()),2&e){a.gc();var n=a.wc(11);a.Bb(1),a.nc("ngIf",n.errors.required)}}function k(e,t){1&e&&(a.Ub(0,"div"),a.Hc(1," Product price is required "),a.Tb())}function w(e,t){1&e&&(a.Ub(0,"div"),a.Hc(1," Product price needs to be decimal value "),a.Tb())}function M(e,t){1&e&&(a.Ub(0,"div"),a.Hc(1," Product price must be greater than zero "),a.Tb())}function S(e,t){if(1&e&&(a.Ub(0,"div",25),a.Fc(1,k,2,0,"div",26),a.Fc(2,w,2,0,"div",26),a.Fc(3,M,2,0,"div",26),a.Tb()),2&e){a.gc();var n=a.wc(17);a.Bb(1),a.nc("ngIf",n.errors.required),a.Bb(1),a.nc("ngIf",n.errors.pattern),a.Bb(1),a.nc("ngIf",n.errors.min)}}function H(e,t){1&e&&(a.Ub(0,"div"),a.Hc(1," Product price is required "),a.Tb())}function O(e,t){if(1&e&&(a.Ub(0,"div",25),a.Fc(1,H,2,0,"div",26),a.Tb()),2&e){a.gc();var n=a.wc(25);a.Bb(1),a.nc("ngIf",n.errors.required)}}function F(e,t){if(1&e&&(a.Ub(0,"option",27),a.Hc(1),a.Tb()),2&e){var n=t.$implicit,c=a.gc();a.nc("selected",c.product.productBrandId===n.id)("ngValue",n.id),a.Bb(1),a.Ic(n.name)}}function j(e,t){if(1&e&&(a.Ub(0,"option",27),a.Hc(1),a.Tb()),2&e){var n=t.$implicit,c=a.gc();a.nc("selected",c.product.productTypeId===n.id)("ngValue",n.id),a.Bb(1),a.Ic(n.name)}}var N,_,q,x=function(e){return{"is-invalid":e}},z=((N=function(){function e(t,n,c,r){_classCallCheck(this,e),this.adminService=t,this.shopService=n,this.route=c,this.router=r,this.product=new y}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this,t=this.getBrands(),n=this.getTypes();Object(C.a)([n,t]).subscribe((function(t){e.types=t[0],e.brands=t[1]}),(function(e){console.log(e)}),(function(){"edit"===e.route.snapshot.url[0].path&&e.loadProduct()}))}},{key:"updatePrice",value:function(e){this.product.price=e}},{key:"loadProduct",value:function(){var e=this;this.shopService.getProduct(+this.route.snapshot.paramMap.get("id")).subscribe((function(t){var n=e.brands&&e.brands.find((function(e){return e.name===t.productBrand})).id,c=e.types&&e.types.find((function(e){return e.name===t.productType})).id;e.product=Object.assign(Object.assign({},t),{productBrandId:n,productTypeId:c})}))}},{key:"getBrands",value:function(){return this.shopService.getBrands()}},{key:"getTypes",value:function(){return this.shopService.getTypes()}},{key:"onSubmit",value:function(e){var t=this;if("edit"===this.route.snapshot.url[0].path){var n=Object.assign(Object.assign(Object.assign({},this.product),e),{price:+e.price});this.adminService.updateProduct(n,+this.route.snapshot.paramMap.get("id")).subscribe((function(e){t.router.navigate(["/admin"])}))}else{var c=Object.assign(Object.assign({},e),{price:+e.price});this.adminService.createProduct(c).subscribe((function(e){t.router.navigate(["/admin"])}))}}}]),e}()).\u0275fac=function(e){return new(e||N)(a.Ob(s),a.Ob(d.a),a.Ob(o.a),a.Ob(o.c))},N.\u0275cmp=a.Ib({type:N,selectors:[["app-edit-product"]],decls:40,vars:23,consts:[[1,"product-edit","mt-5"],[1,"container"],[1,"row"],[1,"col-lg-8"],[3,"ngSubmit"],["productForm","ngForm"],[1,"form-row"],[1,"form-group","col-md-6"],["for","name"],["required","","type","text","id","name","placeholder","Product Name","name","name",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["name","ngModel"],["class","invalid-feedback",4,"ngIf"],["for","price"],["required","","type","text","id","price","placeholder","Price","name","price","pattern","^\\$?([0-9]{1,3},([0-9]{3},)*[0-9]{3}|[0-9]+)(\\.[0-9][0-9])?$","min","0.01",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["price","ngModel"],[1,"form-group","col-md-12"],["for","description"],["required","","id","description","name","description","rows","3",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["description","ngModel"],["for","brand"],["id","brand","name","productBrandId","required","",1,"form-control",3,"ngModel","ngModelChange"],[3,"selected","ngValue",4,"ngFor","ngForOf"],["for","type"],["id","type","name","productTypeId","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary","my-3","float-right",3,"disabled"],[1,"invalid-feedback"],[4,"ngIf"],[3,"selected","ngValue"]],template:function(e,t){if(1&e){var n=a.Vb();a.Ub(0,"section",0),a.Ub(1,"div",1),a.Ub(2,"div",2),a.Ub(3,"div",3),a.Ub(4,"form",4,5),a.cc("ngSubmit",(function(){a.yc(n);var e=a.wc(5);return t.onSubmit(e.valid&&e.value)})),a.Ub(6,"div",6),a.Ub(7,"div",7),a.Ub(8,"label",8),a.Hc(9,"Product Name"),a.Tb(),a.Ub(10,"input",9,10),a.cc("ngModelChange",(function(e){return t.product.name=e})),a.Tb(),a.Fc(12,I,2,1,"div",11),a.Tb(),a.Ub(13,"div",7),a.Ub(14,"label",12),a.Hc(15,"Price"),a.Tb(),a.Ub(16,"input",13,14),a.cc("ngModelChange",(function(e){return t.updatePrice(e-0)})),a.hc(18,"number"),a.Tb(),a.Fc(19,S,4,3,"div",11),a.Tb(),a.Tb(),a.Ub(20,"div",6),a.Ub(21,"div",15),a.Ub(22,"label",16),a.Hc(23,"Description"),a.Tb(),a.Ub(24,"textarea",17,18),a.cc("ngModelChange",(function(e){return t.product.description=e})),a.Tb(),a.Fc(26,O,2,1,"div",11),a.Tb(),a.Tb(),a.Ub(27,"div",6),a.Ub(28,"div",7),a.Ub(29,"label",19),a.Hc(30,"Brand"),a.Tb(),a.Ub(31,"select",20),a.cc("ngModelChange",(function(e){return t.product.productBrandId=e})),a.Fc(32,F,2,3,"option",21),a.Tb(),a.Tb(),a.Ub(33,"div",7),a.Ub(34,"label",22),a.Hc(35,"Type"),a.Tb(),a.Ub(36,"select",23),a.cc("ngModelChange",(function(e){return t.product.productTypeId=e})),a.Fc(37,j,2,3,"option",21),a.Tb(),a.Tb(),a.Tb(),a.Ub(38,"button",24),a.Hc(39,"Submit"),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb()}if(2&e){var c=a.wc(5),r=a.wc(11),i=a.wc(17),o=a.wc(25);a.Bb(10),a.nc("ngClass",a.rc(17,x,r.invalid&&(r.dirty||r.touched)))("ngModel",t.product.name),a.Bb(2),a.nc("ngIf",r.invalid&&(r.dirty||r.touched)),a.Bb(4),a.nc("ngClass",a.rc(19,x,i.invalid&&(i.dirty||i.touched)))("ngModel",a.jc(18,14,t.product.price-0,"1.2-2")),a.Bb(3),a.nc("ngIf",i.invalid&&(i.dirty||i.touched)),a.Bb(5),a.nc("ngClass",a.rc(21,x,o.invalid&&(o.dirty||o.touched)))("ngModel",t.product.description),a.Bb(2),a.nc("ngIf",o.invalid&&(o.dirty||o.touched)),a.Bb(5),a.nc("ngModel",t.product.productBrandId),a.Bb(1),a.nc("ngForOf",t.brands),a.Bb(4),a.nc("ngModel",t.product.productTypeId),a.Bb(1),a.nc("ngForOf",t.types),a.Bb(1),a.nc("disabled",!c.valid)}},directives:[P.t,P.j,P.k,P.a,P.p,r.l,P.i,P.l,r.n,P.n,P.q,r.m,P.m,P.s],pipes:[r.g],styles:[""]}),N),L=[{path:"",component:U},{path:"create",component:z,data:{breadcrumb:"Create"}},{path:"edit/:id",component:z,data:{breadcrumb:"Edit"}}],V=((q=function e(){_classCallCheck(this,e)}).\u0275mod=a.Mb({type:q}),q.\u0275inj=a.Lb({factory:function(e){return new(e||q)},imports:[[o.g.forChild(L)],o.g]}),q),$=((_=function e(){_classCallCheck(this,e)}).\u0275mod=a.Mb({type:_}),_.\u0275inj=a.Lb({factory:function(e){return new(e||_)},imports:[[r.c,i.a,V]]}),_)}}]);